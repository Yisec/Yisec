{"version":3,"file":"yisec.js","sources":["../lib/register.js","../lib/util.js","../lib/event/global.js","../lib/event/index.js","../lib/forceUpdate.js","../lib/config.js","../lib/autorun.js","../lib/parser/parseExpr.js","../lib/parser/parseFilter.js","../lib/execExpr.js","../lib/property/handleClass.js","../lib/domLifeCycle.js","../lib/d.js","../lib/unmount.js","../lib/Component.js","../lib/parser/helper.js","../lib/parser/parseTemplate.js","../lib/event/alias.js","../lib/property/handleStyle.js","../lib/directive/diff.js","../lib/directive/for.js","../lib/directive/if.js","../lib/transform.js","../lib/render.js","../lib/plugins/router.js","../lib/plugins/cssModule.js","../lib/index.js"],"sourcesContent":["/**\n * 所有注册组件缓存\n */\nexport const registerComponents = {};\n/**\n * 添加全局组件\n * @param name\n * @param Com\n */\nexport default function register(name, Com) {\n    registerComponents[name] = Com;\n}\n","import { registerComponents } from \"./register\";\nimport Component from \"./Component\";\n/**\n * 获取数据类型\n * @param arg\n */\nexport function getType(arg) {\n    return Object.prototype.toString.call(arg).match(/\\s(.+)]/)[1].toLowerCase();\n}\nexport function isFunction(...args) {\n    return args.every(arg => getType(arg) === 'function');\n}\nexport function isArray(...args) {\n    return args.every(arg => getType(arg) === 'array');\n}\nexport function isObject(...args) {\n    return args.every(arg => getType(arg) === 'object');\n}\nexport function isString(...args) {\n    return args.every(arg => getType(arg) === 'string');\n}\nexport function isBool(...args) {\n    return args.every(arg => getType(arg) === 'boolean');\n}\nexport function isPromise(...args) {\n    return args.every(arg => getType(arg) === 'promise');\n}\n/**\n * 转classname\n * @param v\n */\nexport function toClassNames(v) {\n    switch (getType(v)) {\n        case 'array': {\n            return v.map(toClassNames).join(' ');\n        }\n        case 'object': {\n            return Object.keys(v).map(key => {\n                return v[key] ? key : '';\n            }).join(' ');\n        }\n        case 'string': {\n            return v;\n        }\n        default: {\n            return '';\n        }\n    }\n}\n// setTimeout的封装\nexport function ST(fn, time) {\n    if (time > 0) {\n        setTimeout(fn, time);\n    }\n    else {\n        fn();\n    }\n}\n// 移除重复元素\nexport function uniqueArr(arr = []) {\n    const newArr = [];\n    arr.forEach(item => {\n        if (!newArr.includes(item)) {\n            newArr.push(item);\n        }\n    });\n    return newArr;\n}\nexport function merge(...anys) {\n    const base = anys[0];\n    anys.slice(1).forEach(any => {\n        Object.keys(any).forEach(key => {\n            if (base[key] === undefined) {\n                base[key] = any[key];\n            }\n        });\n    });\n    return base;\n}\n/**\n * 绑定this\n * @param fn\n * @param ctx\n */\nexport function bindContext(fn, ctx) {\n    if (getType(fn).includes('function')) {\n        fn = fn.bind(ctx);\n    }\n    return fn;\n}\nexport function uuid(len = 8) {\n    const S = '0123456789qwertyuioopasdfghjklzxcvbnmQWERTYUIOOPASDFGHJKLZXCVBNM';\n    const LEN = S.length - 1;\n    return ' '.repeat(len).split('').map(() => S[Math.round(Math.random() * LEN)]).join('');\n}\nexport function getComponent(name = '', ctxs = []) {\n    for (let i = 0; i < ctxs.length; i++) {\n        if (ctxs[i].components && ctxs[i].components[name]) {\n            return ctxs[i].components[name];\n        }\n    }\n    return registerComponents[name];\n}\nexport function getParentCtx(ctxs = []) {\n    for (let i = 0; i < ctxs.length; i++) {\n        if (ctxs[i] instanceof Component) {\n            return ctxs[i];\n        }\n    }\n    // 永远不会执行到这里\n    return new Component();\n}\n// 如果arr中存在keys中的元素，那么keys中的元素排序提前\nexport function resortArr(arr = [], keys = []) {\n    const newArr = [];\n    keys.forEach(i => {\n        if (arr.includes(i)) {\n            newArr.push(i);\n        }\n    });\n    arr.forEach(i => {\n        if (!keys.includes(i)) {\n            newArr.push(i);\n        }\n    });\n    return newArr;\n}\nexport function isComponent(component, ast) {\n    if (isPromise(component) || isFunction(component) || isString(component)) {\n        return true;\n    }\n    console.error(component, `${ast.tagName} should be a Component!!! 您可以在组件的Components属性中添加子组件，或者通过Yisec.register注册全局组件`);\n    return false;\n}\n","const eventCache = {};\nconst gloablEventCache = {};\nconst $root = document.documentElement;\nexport function on(element, key, fn) {\n    if (!eventCache[key]) {\n        gloablEventCache[key] = function (event) {\n            const target = event.target;\n            const cache = eventCache[key];\n            // 需要考虑的问题是，如何处理stopPropogation\n            const stopPropagation = event.stopPropagation;\n            let isStop = false; // 是否阻止冒泡\n            // 更改\n            event.stopPropagation = function () {\n                stopPropagation.call(event);\n                isStop = true;\n            };\n            for (let i = 0; i < cache.length; i++) {\n                const { element, fn } = cache[i];\n                if (element === target\n                    || ((target instanceof Node) && element.contains(target))) {\n                    fn.call(element, event);\n                    if (isStop) {\n                        isStop = false;\n                        break;\n                    }\n                }\n            }\n        };\n        $root.addEventListener(key, gloablEventCache[key]);\n    }\n    const cache = eventCache[key] = eventCache[key] || [];\n    // 从组件角度来讲，都是先添加父元素，后添加子元素，因此事件的触发顺序是先触发子元素，再触发父元素的\n    // 因为这里每次都塞到头部\n    cache.unshift({ element, fn });\n}\nexport function off(element, key, fn) {\n    Object.keys(eventCache).forEach((_key) => {\n        if (_key === key || key === undefined) {\n            // 移除缓存\n            eventCache[_key] = eventCache[_key].filter(({ element: _ele, fn: _fn }) => {\n                if (_ele === element\n                    && (_fn === fn || fn === undefined)) {\n                    return false;\n                }\n                return true;\n            });\n            // 事件被卸载完毕处理\n            if (eventCache[_key].length === 0) {\n                $root.removeEventListener(_key, gloablEventCache[_key]);\n                delete gloablEventCache[_key];\n                delete eventCache[_key];\n            }\n        }\n    });\n}\n","import { isFunction } from \"./../util\";\nimport { on, off } from './global';\nconst BubbleEventList = [\n    'click', 'dblclick',\n    'touchstart', 'touchmove', 'touchend',\n    'mousedown', 'mousemove', 'mouseup',\n    'keydown', 'keyup', 'hover',\n];\nexport default class YSEvents {\n    constructor() {\n        this.cache = [];\n    }\n    // 事件绑定\n    on(element, key, fn) {\n        if (!isFunction(fn)) {\n            console.error(fn, `should be a Function`);\n            return;\n        }\n        // 可冒泡的事件，绑定到documentElement上去，避免重复绑定事件\n        if (BubbleEventList.includes(key)) {\n            on(element, key, fn);\n        }\n        else {\n            this.cache.push([key, fn]);\n            element.addEventListener(key, fn);\n        }\n        return this;\n    }\n    // 事件移除\n    off(element, key, fn) {\n        this.cache = this.cache.filter(([_key, _fn]) => {\n            if ((key === _key && fn === _fn) // 卸载指定key,fn的事件\n                || (key === _key && fn === undefined) // 卸载指定key的事件\n                || (key === undefined && fn === undefined) // 卸载所有事件\n            ) {\n                element.removeEventListener(_key, _fn);\n                return false;\n            }\n        });\n        off(element, key, fn);\n        return this;\n    }\n}\n","let queue = [];\nlet timeout;\nlet isUpdating = false;\nexport function addUpdateQueue(list = [], key) {\n    // return list.forEach(fn => fn())\n    if (isUpdating) {\n        // 如果已进入更新之中，则所有因为更新加入队列之中的任务都会立即执行\n        list.forEach(fn => fn());\n        return;\n    }\n    clearTimeout(timeout);\n    queue.push(...list);\n    // setTimeout执行时间明显比0ms要长很多，但是Performance并没有记录函数执行\n    // 经排查发现是mac上chrome的页面滚动阻塞了异步事件的执行\n    timeout = setTimeout(forceUpdate, 0);\n}\nexport default function forceUpdate(afterFn = () => { }) {\n    // console.log('setTimeout等待时长', Date.now() - realtime)\n    isUpdating = true;\n    const haveExec = [];\n    queue.forEach(fn => {\n        // 查看是否执行\n        if (!haveExec.includes(fn)) {\n            haveExec.push(fn);\n            fn();\n        }\n    });\n    isUpdating = false;\n    queue = [];\n    // console.log('执行时长', Date.now() - time)\n    afterFn();\n}\n","// yisec指令前缀\nexport const DIRECTIVE_PREV = 'ys:';\nexport const DIRECTIVE_EXPR = 'ys:expr:';\n// 组件挂载到dom上的key\nexport const COMPONENT_DOM_HOOK = '__yisec_component_hook__';\nexport const OBSERVE_ID = '__observeID__';\nexport const HANDLE_CLASS_FN_NME = '__postClassNames__';\n","import { getType, bindContext, uuid, isArray, isFunction } from \"./util\";\nimport { addUpdateQueue } from \"./forceUpdate\";\nimport { OBSERVE_ID } from \"./config\";\nexport class Observe {\n}\nconst defaultCurrent = () => () => { };\n// observer数据get时，进行依赖手机\nlet currentFn = defaultCurrent;\nexport function resetCurrentFn() {\n    currentFn = defaultCurrent;\n}\n/**\n * 依赖\n * @class Depends\n */\nexport class Depends {\n    constructor(root, key) {\n        this.list = [];\n        this.root = root;\n        this.key = key;\n    }\n    collect() {\n        if (currentFn !== defaultCurrent) {\n            currentFn((fn) => {\n                // 获取依赖函数，并返回移除依赖函数\n                !this.list.includes(fn) && this.list.push(fn);\n                return () => {\n                    this.list = this.list.filter(i => i !== fn);\n                };\n            }, this);\n        }\n    }\n    run(key) {\n        addUpdateQueue(this.list, this.key);\n    }\n}\nclass ObserveId {\n    constructor() {\n        this.id = uuid() + ObserveId.id++;\n        this.keys = [];\n    }\n}\nObserveId.id = 0;\nfunction addObserverId(newObj) {\n    if (newObj[OBSERVE_ID] instanceof ObserveId) {\n        return;\n    }\n    Object.defineProperty(newObj, OBSERVE_ID, {\n        value: new ObserveId(),\n        configurable: false,\n        writable: false,\n        enumerable: false,\n    });\n}\nexport function addObserve(ctx, key, defaultValue = ctx[key], options = { deep: false }) {\n    addObserverId(ctx);\n    // 这里隐含了一个bug，如果state,prop被更改，就懵逼了，因此设置state、props writable: false\n    if (ctx[OBSERVE_ID].keys.includes(key)) {\n        ctx[key] = defaultValue; // 数据已监听，则更新\n        return;\n    }\n    else {\n        ctx[OBSERVE_ID].keys.push(key);\n    }\n    let value = bindContext(defaultValue, ctx);\n    // 依赖此key的函数\n    const depends = new Depends(ctx, key);\n    let isResetValue = true;\n    // 默认bind this\n    Object.defineProperty(ctx, key, {\n        get() {\n            // 收集依赖\n            depends.collect();\n            // 只有在被获取的时候，才会对数据进行observe\n            if (isResetValue && options.deep) {\n                value = observer(value, Object.assign({}, options, { parentDepend: depends }));\n            }\n            isResetValue = false;\n            return value;\n        },\n        set(newValue) {\n            // 每次值更新都会触发更新\n            isResetValue = true;\n            value = bindContext(newValue, ctx);\n            // 触发依赖函数更新\n            depends.run();\n        },\n        enumerable: true,\n    });\n}\n/**\n * 监听数组\n * @param arr\n * @param parentDepends\n */\nexport function observeArr(arr = [], options) {\n    // 判断是否observe过\n    if (isObserve(arr)) {\n        return arr;\n    }\n    const newArr = arr.map(item => observer(item));\n    Object.defineProperty(newArr, OBSERVE_ID, {\n        value: new ObserveId(),\n        enumerable: false,\n        writable: false,\n        configurable: false,\n    });\n    [\n        'splice',\n        'push',\n        'shift',\n        'unshift',\n        'pop',\n    ].forEach(key => {\n        const value = [][key].bind(newArr);\n        // 如果数组长度被修改，通知他的父元节点\n        Object.defineProperty(newArr, key, {\n            get() {\n                return (...args) => {\n                    if (options.deep) {\n                        if (key == 'push' || key == 'unshift') {\n                            args = args.map(i => observer(i));\n                        }\n                        else if (key == 'splice') {\n                            args = args.slice(0, 2).concat(args.slice(2).map(i => observer(i)));\n                        }\n                    }\n                    const result = value(...args);\n                    // 对于数组的变化，直接出发调用数组的依赖\n                    options.parentDepend && options.parentDepend.run();\n                    return result;\n                };\n            },\n            enumerable: false,\n        });\n    });\n    return newArr;\n}\n/**\n * 监听对象\n * @param obj\n * @param init\n */\nexport function observeObj(obj = {}, options) {\n    let newObj = new Observe();\n    // 添加id\n    addObserverId(newObj);\n    Object.keys(obj).forEach(key => {\n        addObserve(newObj, key, obj[key], options);\n    });\n    return newObj;\n}\nexport function isObserve(obj) {\n    return (obj instanceof Observe) || (isArray(obj) && obj[OBSERVE_ID] instanceof Observe);\n}\n/**\n * 构造一个新的observe对象\n * @param {objet} obj\n * @returns\n */\nexport function observer(obj, options = { deep: false }) {\n    if (isObserve(obj)) {\n        return obj;\n    }\n    switch (getType(obj)) {\n        case 'array':\n            return observeArr(obj, options);\n        case 'object':\n            return observeObj(obj, options);\n        default:\n            return obj;\n    }\n}\nexport function observerDeep(obj) {\n    return observer(obj, { deep: true });\n}\n/**\n * 接受函数，当依赖的数据发生变化后，会立即执行函数\n *\n * @param {function} fn\n * @returns\n */\nexport function autorun(fn, options = {}) {\n    let destoryDepends = [];\n    let depends = [];\n    // 销毁依赖\n    const destory = () => {\n        destoryDepends.forEach(fn => fn());\n        destoryDepends = [];\n        depends.splice(0, depends.length);\n    };\n    const wrapFn = () => {\n        // 显示之前依赖\n        // console.log('before', depends.map(i => i.key))\n        destory(); // 销毁上次依赖监听\n        // 收集本次依赖\n        currentFn = (getDestory, depend) => {\n            destoryDepends.push(getDestory(wrapFn));\n            depends.push(depend);\n            return wrapFn;\n        };\n        const result = fn();\n        // 重置回默认值\n        resetCurrentFn();\n        // 显示之前依赖\n        // console.log('after', depends.map(i => i.key))\n        isFunction(options.callback) && options.callback(result);\n    };\n    // wrapFn.options = options\n    // 立即执行\n    wrapFn();\n    return destory;\n}\n","import { uniqueArr } from \"./../util\";\nconst cache = {};\nexport default function parseExpr(body) {\n    if (cache[body]) {\n        return cache[body];\n    }\n    // 去除字符串，剩下的都是变量\n    // 对于关键字new 和 对象的支持很懵逼\n    let params = (body.replace(/'[^']*'|\"[^\"]*\"/g, ' ') // 移除字符串 'ddd' \"ddd\"\n        .replace(/([A-Za-z_$][A-Za-z0-9_$]*\\s*)?:/g, '') // 移除对象key { aa: }\n        .match(/\\.?[A-Za-z_$][A-Za-z0-9_$]*\\s*/g) || [] // 获取所有变量 .?aa\n    ).filter(i => !/^\\.|new\\s+/.test(i)) // 去除.aa new\n        .map(i => i.trim()); // 去除空格\n    params = uniqueArr(params);\n    const result = {\n        params,\n        body,\n        fn: new Function(...params, `return ${body}`)\n    };\n    cache[body] = result;\n    return result;\n}\n","// 分割表达式，只处理不重复的分隔符|\nconst parseFilterCache = {};\nexport default function parseFilter(str = '') {\n    if (parseFilterCache[str]) {\n        return parseFilterCache[str];\n    }\n    const exprArr = [];\n    let current = '';\n    let index = 0;\n    while (index < str.length) {\n        const char = str[index];\n        // 前后不能是| |\n        if (char === '|'\n            && str[index - 1] !== '|'\n            && str[index + 1] !== '|') {\n            exprArr.push(current);\n            index += 1;\n            current = '';\n            continue;\n        }\n        else if (char === \"'\" || char === '\"') {\n            const [matchStr = ''] = str.slice(index).match(/^'[^']*'|^\"[^\"]*\"/) || [];\n            current += matchStr;\n            index += matchStr.length;\n            continue;\n        }\n        current += char;\n        index += 1;\n    }\n    exprArr.push(current);\n    const result = {\n        expr: exprArr[0],\n        pipes: exprArr.slice(1).map(i => i.trim()).filter(i => i),\n    };\n    parseFilterCache[str] = result;\n    return result;\n}\n","import { autorun } from \"./autorun\";\nimport { isArray } from './util';\nimport parseExpr from './parser/parseExpr';\nimport parseFilter from './parser/parseFilter';\nconst pipes = [];\nexport function addPipe(...ctxs) {\n    pipes.push(...ctxs);\n}\n/**\n * pipe 上一个函数返回结果作为下一个函数的输入\n * @param fns\n */\nfunction handlePipe(...fns) {\n    return (arg) => {\n        let result = arg;\n        fns.forEach(fn => {\n            result = fn(result);\n        });\n        return result;\n    };\n}\nfunction getPipes(exprs, ctxs) {\n    return handlePipe(...exprs.map(expr => execExprIm(expr, [...ctxs, ...pipes, window])));\n}\n/**\n * 从作用域链中获取指定key的值\n * @param key\n * @param ctxs\n */\nfunction getValue(key, ctxs) {\n    for (let i = 0; i < ctxs.length; i++) {\n        if (ctxs[i].hasOwnProperty(key) || ctxs[i][key] !== undefined) {\n            return ctxs[i][key];\n        }\n    }\n    if (key === 'true') {\n        return true;\n    }\n    if (key === 'false') {\n        return false;\n    }\n    return window[key];\n}\nexport function execExprIm(expr = '', ctxs) {\n    const { expr: inputExpr, pipes: pipeExprs } = parseFilter(expr);\n    // 我们不合并对象，因为对象可能是observable的，这里通过with嵌套的形式\n    const parseResult = parseExpr(inputExpr);\n    const input = parseResult.fn(...parseResult.params.map(key => getValue(key, ctxs)));\n    // with语句的性能太差，弃之\n    // const names = ctxs.map((i, index) => '__with__local__' + index)\n    // let body = `return ${inputExpr}`\n    // names.reverse().forEach(i => {\n    //     body = `with (${i}) {\n    //         ${body}\n    //      }`\n    // })\n    // const input = new Function(...names, body)(...ctxs)\n    if (pipes.length) {\n        return getPipes(pipeExprs, ctxs)(input);\n    }\n    return input;\n}\n/**\n * 执行表达式\n * @param {string} expr\n * @param {any[]} ctxs\n * @param {(result: any) => void} fn\n * @returns\n */\nexport function execExpr(expr, ctxs, fn) {\n    let oldValue;\n    let oldLen;\n    let newValueCache;\n    let execTime = 0;\n    function isEqual(newValue, oldValue) {\n        if (newValue !== oldValue) {\n            return false;\n        }\n        // 数组一直变化\n        if (isArray(newValue)) {\n            return false;\n        }\n        return true;\n    }\n    return fn && autorun(() => {\n        return execExprIm(expr, ctxs);\n    }, {\n        callback: newValue => {\n            oldValue = newValueCache;\n            newValueCache = newValue;\n            const equal = isEqual(newValue, oldValue);\n            if (!isEqual(newValue, oldValue)) {\n                execTime += 1;\n                fn(newValue, oldValue, execTime);\n            }\n        },\n        expr,\n    });\n}\n// 执行一次，获取值\nexport function execExprOnce(expr, ctxs) {\n    let returnValue;\n    if (!expr.trim()) {\n        return undefined;\n    }\n    execExpr(expr, ctxs, (value) => {\n        returnValue = value;\n    })();\n    return returnValue;\n}\n","import { execExpr } from \"./../execExpr\";\nimport { toClassNames, getParentCtx } from \"./../util\";\nimport { DIRECTIVE_EXPR, HANDLE_CLASS_FN_NME } from \"../config\";\n// 通过插件处理classNames\nfunction handleClassNames(str, ctx) {\n    return ctx[HANDLE_CLASS_FN_NME] ? ctx[HANDLE_CLASS_FN_NME](str) : str;\n}\n// 更新dom上的className\nfunction updateClassName(element, classNames, key, classes, ctx) {\n    classNames[key] = handleClassNames(classes, ctx);\n    const classStr = Object.keys(classNames)\n        .map(key => classNames[key])\n        .map(i => i || '').join(' ').trim();\n    if (element instanceof HTMLElement) {\n        element.className = classStr;\n    }\n    else if (element instanceof SVGElement) {\n        // SVGElement 的className属性为read only，因此这里使用setAttribute\n        element.setAttribute('class', classStr);\n    }\n}\n// 获取class属性\nexport function getClassProperties(type) {\n    type += (type ? '-' : '');\n    return [\n        `${DIRECTIVE_EXPR}${type}class`,\n        `:${type}class`,\n        `${type}class`,\n    ];\n}\n// 测试props上是否存在指定的属性\nexport function testClass(vdom, type = '') {\n    const { ast, dom: element } = vdom;\n    const classProperties = getClassProperties(type);\n    return Object.keys(ast.props).some(key => classProperties.includes(key));\n}\n// class\n// enter-class\n// leave-class\nexport default function handleClass(vdom, ctxs, key, type = '') {\n    const { ast: node, dom: element } = vdom;\n    const value = node.props[key];\n    const { classNames } = vdom;\n    const ctx = getParentCtx(ctxs);\n    type += (type ? '-' : '');\n    if (key === `:${type}class` || key === `ys:expr:${type}class`) {\n        vdom.exprs.push(execExpr(value, ctxs, (newValue, oldValue) => {\n            updateClassName(element, classNames, key, toClassNames(newValue), ctx);\n        }));\n        return true;\n    }\n    else if (key === `${type}class`) {\n        updateClassName(element, classNames, key, value, ctx);\n        return true;\n    }\n    return false;\n}\n","import handleClass, { testClass, getClassProperties } from \"./property/handleClass\";\n/**\n * dom加载成功后，同步做某些事情\n * @param vdom\n */\nexport function handleEnter(vdom) {\n    if (vdom.dom && testClass(vdom, 'enter')) {\n        getClassProperties('enter').forEach(key => {\n            handleClass(vdom, vdom.ctxs, key, 'enter');\n        });\n    }\n}\n/**\n * 判断dom是否可以异步卸载\n * @param vdom\n */\nexport function handleLeave(vdom) {\n    const { leaveTime } = vdom.ast.props;\n    if (vdom.dom && leaveTime && testClass(vdom, 'leave')) {\n        // vdom.dom.className += ` ${leaveClass}`\n        getClassProperties('leave').forEach(key => {\n            handleClass(vdom, vdom.ctxs, key, 'leave');\n        });\n        return new Promise(res => {\n            setTimeout(res, Number(leaveTime));\n        });\n    }\n    return true;\n}\n","import YSEvents from \"./event/index\";\nimport { handleEnter, handleLeave } from \"./domLifeCycle\";\nimport { execExprOnce } from \"./execExpr\";\nimport { DIRECTIVE_EXPR } from \"./config\";\n// sssdddd\nexport class VirtualDOM {\n    constructor(parent) {\n        this.exprs = [];\n        this.events = new YSEvents();\n        this.children = [];\n        this.ctxs = [];\n        this.unmounted = false;\n        this.classNames = {};\n        if (parent) {\n            this.parent = parent;\n            this.parent.children.push(this);\n        }\n    }\n    // dom create 回调\n    oncreate() {\n        const { dom } = this;\n        if (dom) {\n            const { [`${DIRECTIVE_EXPR}oncreate`]: fnExpr = '' } = this.ast.props;\n            const fn = execExprOnce(fnExpr, this.ctxs);\n            // add enter class\n            handleEnter(this);\n            fn && fn(dom, this);\n        }\n    }\n    // onupdate(key, newValue, olValue) {\n    //     const { dom } = this;\n    //     const { onupdate: fn } = this.ast.props\n    //     if (dom && fn) {\n    //         fn(key, newValue, olValue)\n    //     }\n    // }\n    // dom unmount 回调\n    onunmount() {\n        const { dom } = this;\n        // add leave class\n        if (dom) {\n            const { [`${DIRECTIVE_EXPR}onunmount`]: fnExpr = '' } = this.ast.props;\n            const fn = execExprOnce(fnExpr, this.ctxs);\n            const resultResult = handleLeave(this);\n            const fnResult = fn && fn(dom);\n            // 判断执行结果中是否有Promise\n            const pList = [resultResult, fnResult].filter(r => (r instanceof Promise));\n            if (pList.length) {\n                // 等待所有任务结束\n                Promise.all(pList).then(() => {\n                    dom.parentElement && dom.parentElement.removeChild(dom);\n                });\n            }\n            else {\n                dom.parentElement && dom.parentElement.removeChild(dom);\n            }\n        }\n    }\n    // 卸载vdom\n    unmount() {\n        // 关闭依赖追踪\n        this.exprs.forEach(fn => fn());\n        (this.dom instanceof HTMLElement) && this.events.off(this.dom);\n        // 如果是组件，卸载组件\n        this.component && this.component.__willUnmount();\n        // vdom已卸载\n        this.unmounted = true;\n    }\n}\nexport class TokenElement {\n    constructor(type, index, value, origin = value, isExpr = false) {\n        this.type = type;\n        this.index = index;\n        this.value = value;\n        this.origin = origin;\n        this.isExpr = isExpr;\n    }\n}\n/**\n * AST节点\n * @class ASTNode\n */\nexport class ASTNode {\n    constructor(tagName = '') {\n        this.children = []; // 子节点\n        this.props = {}; // props\n        this.type = 'element'; // 节点类型\n        this.exprs = [];\n        this.isSVG = false; // 是不是svg节点\n        this.tagName = tagName;\n        // 判断是不是组件\n        if (/^[A-Z]/.test(tagName)) {\n            this.type = 'component';\n        }\n    }\n}\n","// 组件卸载，其实不应该一个元素一个元素的从dom移除，而应该整体性移除\n// 因为AST与真实的dom之间还存在差距，因此我们在AST的基础之上，根据指令等其他条件又生成了一个真实DOM的映射树\n// 用来处理DOM的增删\n// 卸载元素/组件的时候，需要卸载相对应的事件/与数据监听\nexport function unmountNode(vdom, removeDOM = true) {\n    // 如果当前节点有真实dom映射，则子节点不再操作dom移除，提升性能\n    vdom.children.forEach(i => unmountNode(i, removeDOM && !vdom.dom));\n    vdom.unmount();\n    // 如果vdom上有leave leaveTime\n    removeDOM && vdom.onunmount();\n    if (vdom.parent) {\n        vdom.parent.children = vdom.parent.children.filter(i => i !== vdom);\n    }\n}\n/**\n * 卸载子元素\n * @param {any} ele\n */\nexport function unmountChildren(vdom) {\n    vdom.children.forEach(child => {\n        unmountNode(child);\n    });\n    vdom.children = [];\n}\n","import { isFunction } from \"./util\";\nimport { VirtualDOM } from \"./d\";\nimport { unmountNode } from \"./unmount\";\nexport default class Component {\n    constructor() {\n        // 模板\n        this.template = '';\n        // 状态\n        this.state = {};\n        // props\n        this.props = {};\n        // 子组件\n        this.components = {};\n        // 子组件\n        this.children = [];\n        // 指定dom\n        this.refs = {};\n        this.vdom = new VirtualDOM();\n        // 方便template直接获取经过复杂计算的数据\n        this.computed = {};\n        // 向父组件派发事件\n        this.$emit = (key, ...data) => {\n            let parent = this.parent;\n            let stopBubble = false;\n            while (!stopBubble && parent) {\n                const fn = parent[key];\n                if (isFunction(fn)) {\n                    stopBubble = fn.call(parent, ...data) === false;\n                }\n                parent = parent.parent;\n            }\n        };\n        // 向子组件派发事件\n        this.$emitChildren = (key, ...data) => {\n            function children(node) {\n                node.children.forEach(item => {\n                    const fn = item[key];\n                    isFunction(fn) && fn.call(item, ...data);\n                    children(item);\n                });\n            }\n            children(this);\n        };\n        // 向同级组件派发事件\n        this.$emitSiblings = (key, ...data) => {\n            this.parent && this.parent.children.forEach(item => {\n                if (item !== this) {\n                    const fn = item[key];\n                    isFunction(fn) && fn.call(item, ...data);\n                }\n            });\n        };\n    }\n    render() {\n        return this.template;\n    }\n    willMount() { }\n    didMount() { }\n    didUpdate() { }\n    // 内部方法，触发组件卸载\n    __willUnmount() {\n        this.children.forEach(com => com.__willUnmount());\n        this.willUnmount();\n        unmountNode(this.vdom);\n        this.children = [];\n        if (this.parent) {\n            this.parent.children = this.parent.children.filter(i => i !== this);\n        }\n    }\n    willUnmount() { }\n}\nComponent.defaultProps = {};\n","// 支持嵌套的表达式匹配， 主要为了支持<span>{{a: b}}</span>\n// 性能优化，这可在startToken match后，查看后面是否有arr.length数量的endToken\nexport function getMatched(start = '<%', end = '%>', str = '') {\n    const START_LEN = start.length;\n    const END_LEN = end.length;\n    let index = 0;\n    let arr = [];\n    let result = {\n        matchStr: '',\n        value: ''\n    };\n    if (!str.startsWith(start)) {\n        return result;\n    }\n    while (index < str.length) {\n        // startToken\n        if (str.slice(index, index + START_LEN) === start) {\n            arr.push(false);\n            index += START_LEN;\n            continue;\n        }\n        else if (str.slice(index, index + END_LEN) === end) {\n            index += END_LEN;\n            arr.pop();\n            if (arr.length === 0) {\n                const matchStr = str.slice(0, index);\n                return {\n                    matchStr,\n                    value: matchStr.slice(START_LEN, -END_LEN)\n                };\n            }\n            continue;\n        }\n        // index++\n        index += 1;\n    }\n    // 匹配失败\n    return result;\n}\n","// 解析template\n// 有时候我们不想使用jsx，不想使用babel编译💊\n// 那就使用类似vue angular之类的字符串模板吧\n// 使用模板编译的好处有哪些？，模板本身可以作为资源加载，也就是View层\n// 自身的逻辑层可以作为控制器\n// 再加一个Model作为数据来源\nimport { ASTNode, TokenElement } from \"./../d\";\nimport { getMatched } from \"./helper\";\nimport { DIRECTIVE_EXPR } from \"../config\";\n/**\n * 半闭合标签 可以以 > 或 /> 结尾\n */\nconst selfCloseElements = ['img', 'br', 'hr', 'input'];\n// 我们应该在解析关键字的同时，保留原始字符串\nconst M = {\n    get SELF_CLOSE() {\n        return /^(\\/\\s*>)\\s*/;\n    },\n    get CLOSE_START() {\n        return /^(<\\s*\\/)\\s*/;\n    },\n    get TAG_CLOSE() {\n        return /^(>)\\s*/;\n    },\n    get OPEN_START() {\n        return /^(<)\\s*/;\n    },\n    get EQ() {\n        return /^(=)\\s*/;\n    },\n    get TAG_NAME() {\n        return /^([a-zA-Z]-?([a-zA-Z0-9]-?)*)\\s*/; // Ass-dd-09\n    },\n    get PROPERTY_NAME() {\n        return /^([a-zA-Z@:]-?([a-zA-Z0-9:]-?)*)\\s*/; // @:-aaaa\n    },\n    get PROPERTY_VALUE() {\n        return /^\"([^\"]*)\"\\s*/; // 支持 \"xxx\" {xc}\n    },\n    get EXPR() {\n        return /^{{2}(((?!}{2}).)*)\\}{2}\\s*/;\n    },\n    get STRING() {\n        return /^[\\s\\S][^<{]*/;\n    },\n};\n/**\n * 字符串转token\n *\n * @param {string} [str='']\n * @returns {TokenElement[]}\n */\nexport function getToken(str = '') {\n    const token = [];\n    let localStr = str;\n    let index = 0;\n    // closeStart\n    // 获取token，并记解析位置\n    function removePreSpace() {\n        const [space] = localStr.match(/^\\s+/) || [''];\n        index += space.length;\n        localStr = localStr.slice(space.length);\n    }\n    function getPrev(index) {\n        return token[token.length - index] || {};\n    }\n    function next() {\n        removePreSpace();\n        if (localStr.length == 0)\n            return;\n        // />\n        if (M.SELF_CLOSE.test(localStr)) {\n            const [matchStr, value] = localStr.match(M.SELF_CLOSE) || ['', ''];\n            token.push(new TokenElement('SELF_CLOSE', index, value, matchStr));\n            index += value.length;\n            localStr = localStr.slice(value.length);\n            return next();\n        }\n        // </\n        if (M.CLOSE_START.test(localStr)) {\n            const [matchStr, value] = localStr.match(M.CLOSE_START) || ['', ''];\n            token.push(new TokenElement('CLOSE_START', index, value));\n            index += value.length;\n            localStr = localStr.slice(value.length);\n            return next();\n        }\n        // <\n        if (M.OPEN_START.test(localStr)) {\n            const [matchStr, value] = localStr.match(M.OPEN_START) || ['', ''];\n            token.push(new TokenElement('OPEN_START', index, value, matchStr));\n            index += value.length;\n            localStr = localStr.slice(value.length);\n            return next();\n        }\n        // >\n        if (M.TAG_CLOSE.test(localStr)) {\n            const [matchStr, value] = localStr.match(M.TAG_CLOSE) || ['', ''];\n            token.push(new TokenElement('TAG_CLOSE', index, value, matchStr));\n            index += value.length;\n            localStr = localStr.slice(value.length);\n            return next();\n        }\n        // =\n        if (M.EQ.test(localStr)) {\n            const [matchStr, value] = localStr.match(M.EQ) || ['', ''];\n            token.push(new TokenElement('EQ', index, value, matchStr));\n            index += value.length;\n            localStr = localStr.slice(value.length);\n            return next();\n        }\n        // Aaa-bb 向前读一位需要是 OPEN_START | CLOSE_START\n        if (M.TAG_NAME.test(localStr)\n            && (getPrev(1).type == 'OPEN_START' || getPrev(1).type == 'CLOSE_START')) {\n            const [matchStr, value] = localStr.match(M.TAG_NAME) || ['', ''];\n            token.push(new TokenElement('TAG_NAME', index, value, matchStr));\n            index += value.length;\n            localStr = localStr.slice(value.length);\n            return next();\n        }\n        // :@Aaa-bb\n        if (M.PROPERTY_NAME.test(localStr)) {\n            const [matchStr, value] = localStr.match(M.PROPERTY_NAME) || ['', ''];\n            token.push(new TokenElement('PROPERTY_NAME', index, value, matchStr));\n            index += value.length;\n            localStr = localStr.slice(value.length);\n            return next();\n        }\n        // 属性value \"\"\n        if (M.PROPERTY_VALUE.test(localStr)\n            && getPrev(1).type == 'EQ' // 向前读一位需要是 EQ\n            && getPrev(2).type == 'PROPERTY_NAME' // 向前读2位需要是 PROPERTY_NAME\n        ) {\n            // 向前读，需要是\n            const [matchStr, value] = localStr.match(M.PROPERTY_VALUE) || ['', ''];\n            token.push(new TokenElement('PROPERTY_VALUE', index, value, matchStr));\n            index += matchStr.length;\n            localStr = localStr.slice(matchStr.length);\n            return next();\n        }\n        // 表达式\n        if (/^{.*}/.test(localStr)) {\n            const { matchStr, value } = getMatched('{', '}', localStr);\n            if (matchStr) {\n                token.push(new TokenElement('EXPR', index, value, matchStr, true));\n                index += matchStr.length;\n                localStr = localStr.slice(matchStr.length);\n                return next();\n            }\n        }\n        // 文本节点\n        if (M.STRING.test(localStr)) {\n            const [value] = localStr.match(M.STRING) || [''];\n            token.push(new TokenElement('STRING', index, value));\n            index += value.length;\n            localStr = localStr.slice(value.length);\n            return next();\n        }\n    }\n    next();\n    return token;\n}\n/**\n * 处理解析错误\n *\n * @param {any} token\n * @param {any} template\n * @param {any} message\n */\nfunction handleASTError(token, template = '', message = '') {\n    const str = template.slice(0, token.index);\n    const enter = str.match(/\\n/g) || [];\n    const row = enter ? enter.length + 1 : 1;\n    const column = str.length - Math.max(str.lastIndexOf('\\n'), 0);\n    const insertStr = ' '.repeat(column - 1) + '^';\n    // 比如我可能只显示5+5的位置\n    const arr = template.split(/\\n/g);\n    const P = Math.max(row - 5, 0);\n    const startArr = arr.slice(P, row);\n    const endArr = arr.slice(row, P + 5);\n    const S = [\n        ...startArr,\n        insertStr,\n        ...endArr,\n    ].join('\\n');\n    console.error(`at row:${row} column:${column} \\n\\n${S} \\n\\n${message}`);\n}\n// 读取元素\n// token[0].type == 'OPEN_START'\n// token[1].type == 'TAG_NAME'\n// token[2].type == 'TAG_NAME' *\n//     token[3].type == 'EQ' && token[4].type == 'PROPERTY_VALUE'\n// token[0].type == 'TAG_CLOSE' || token[0].type == 'SELF_CLOSE'\n//     Element\n// token[0].type == 'CLOSE_START'\n// token[1].type == 'TAG_NAME'\n// token[2].type == 'TAG_CLOSE'\nexport function toAST(token = [], template = '') {\n    const root = new ASTNode();\n    let currentNode = root;\n    let index = 0;\n    let currentT;\n    const LEN = token.length;\n    function getT(index) {\n        return token[index];\n    }\n    next();\n    function next() {\n        if (index >= LEN)\n            return;\n        // 当前token\n        currentT = token[index];\n        // open tag | close self tag\n        if (currentT.type == 'OPEN_START'\n            && getT(index + 1).type == 'TAG_NAME') {\n            // 获取\n            let localIndex = index + 2;\n            const props = {};\n            const tagName = getT(index + 1).value;\n            while (getT(localIndex).type == 'TAG_NAME' || getT(localIndex).type == 'PROPERTY_NAME') {\n                if (getT(localIndex + 1).type == 'EQ') {\n                    if (['PROPERTY_VALUE', 'EXPR'].includes(getT(localIndex + 2).type)) {\n                        let propertyKey = getT(localIndex).value;\n                        const propertyValue = getT(localIndex + 2);\n                        // 如果propertyValue是表达式，并且key不以:|ys:|@开头，追加ys:expr:表示此key是一个表达式\n                        if (propertyValue.isExpr && !/^:|@|ys:/.test(propertyKey)) {\n                            propertyKey = `${DIRECTIVE_EXPR}${propertyKey}`;\n                        }\n                        props[propertyKey] = propertyValue.value;\n                        localIndex += 3;\n                        continue;\n                    }\n                    else {\n                        handleASTError(getT(localIndex), template, `${getT(localIndex).value} should have a value`);\n                    }\n                }\n                props[getT(localIndex).value] = true;\n                localIndex += 1;\n            }\n            const TAG_TYPE = getT(localIndex).type;\n            if (TAG_TYPE == 'TAG_CLOSE' || TAG_TYPE == 'SELF_CLOSE') {\n                const node = new ASTNode(tagName);\n                node.props = props;\n                node.parent = currentNode;\n                currentNode.children.push(node);\n                if (TAG_TYPE === 'TAG_CLOSE' && !selfCloseElements.includes(tagName)) {\n                    currentNode = node;\n                }\n            }\n            index = localIndex + 1;\n        }\n        else if (currentT.type == 'CLOSE_START'\n            && getT(index + 1).type == 'TAG_NAME'\n            && getT(index + 2).type == 'TAG_CLOSE') {\n            if (currentNode.tagName !== getT(index + 1).value) {\n                const closeTagName = getT(index + 1).value;\n                let errMsg = `close tag name should be ${currentNode.tagName}, but now is ${closeTagName}`;\n                if (!currentNode.tagName) {\n                    errMsg = `close tag name is ${closeTagName}, but the open tag name is empty!!!`;\n                }\n                handleASTError(getT(index + 1), template, errMsg);\n            }\n            currentNode = currentNode.parent;\n            index += 3;\n        }\n        else {\n            const last = currentNode.children[currentNode.children.length - 1];\n            if (currentT.type == 'EXPR') {\n                const node = new ASTNode();\n                node.value = currentT.value;\n                node.type = 'expr';\n                node.parent = currentNode;\n                currentNode.children.push(node);\n            }\n            else if (last && last.type === 'text') {\n                last.value += currentT.value;\n            }\n            else {\n                const node = new ASTNode();\n                node.type = 'text';\n                node.value = currentT.origin || currentT.value || '';\n                node.parent = currentNode;\n                currentNode.children.push(node);\n            }\n            index++;\n        }\n        next();\n    }\n    return root;\n}\n// 处理svg节点\nfunction handleSVG(node, isSVG = false) {\n    if (isSVG || node.tagName === 'svg') {\n        isSVG = true;\n        node.isSVG = isSVG;\n    }\n    node.children.forEach(node => handleSVG(node, isSVG));\n    return node;\n}\n// 处理if else\nfunction handleIfElse(node) {\n    let prevCondition = '';\n    node.children.forEach(child => {\n        if (child.props['ys:if']) {\n            prevCondition = 'if';\n        }\n    });\n}\nlet cache = {};\n// 字符串 => ast\nexport default function (template = '') {\n    // 使用缓存，不用再ast => dom的时候对ast进行修改\n    if (!cache[template]) {\n        const node = toAST(getToken(template), template);\n        // 为node添加isSVG标示\n        cache[template] = handleSVG(node);\n    }\n    return cache[template];\n}\n","let isScroll = false;\nlet timeout;\nwindow.addEventListener('scroll', () => {\n    isScroll = true;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n        isScroll = false;\n    }, 50);\n});\n// 事件别名\nconst eventAlias = {\n    enter: (fn) => ([\n        {\n            eventName: 'keydown',\n            listener: (event, ...args) => {\n                if (event.keyCode == 13) {\n                    fn(event, ...args);\n                }\n            }\n        }\n    ]),\n    up: (fn) => ([\n        {\n            eventName: 'keydown',\n            listener: (event, ...args) => {\n                if (event.keyCode == 38) {\n                    fn(event, ...args);\n                }\n            }\n        }\n    ]),\n    down: (fn) => ([\n        {\n            eventName: 'keydown',\n            listener: (event, ...args) => {\n                if (event.keyCode == 40) {\n                    fn(event, ...args);\n                }\n            }\n        }\n    ]),\n    left: (fn) => ([\n        {\n            eventName: 'keydown',\n            listener: (event, ...args) => {\n                if (event.keyCode == 37) {\n                    fn(event, ...args);\n                }\n            }\n        }\n    ]),\n    esc: (fn) => ([\n        {\n            eventName: 'keyup',\n            listener: (event, ...args) => {\n                if (event.keyCode == 27) {\n                    fn(event, ...args);\n                }\n            }\n        }\n    ]),\n    ctrlEnter: (fn) => {\n        const recodeKey = {\n            ctrl: false,\n            enter: false,\n        };\n        return ([\n            {\n                eventName: 'keydown',\n                listener: (event, ...args) => {\n                    if (event.keyCode == 13) {\n                        recodeKey.enter = true;\n                    }\n                    else if (event.keyCode == 17) {\n                        recodeKey.ctrl = true;\n                    }\n                    recodeKey.enter && recodeKey.ctrl && fn(...args);\n                }\n            },\n            {\n                eventName: 'keyup',\n                listener: (event, ...args) => {\n                    if (event.keyCode == 13) {\n                        recodeKey.enter = false;\n                    }\n                    else if (event.keyCode == 17) {\n                        recodeKey.ctrl = false;\n                    }\n                }\n            }\n        ]);\n    },\n    click: (fn) => {\n        if (window.navigator.userAgent.toLowerCase().match(/android/) && 0) {\n            let time = 0;\n            let isMove = false;\n            return [\n                {\n                    eventName: 'touchstart',\n                    listener: (event) => {\n                        time = Date.now();\n                    }\n                },\n                {\n                    eventName: 'touchmove',\n                    listener: (event) => {\n                        isMove = true;\n                    }\n                },\n                {\n                    eventName: 'touchend',\n                    listener: (event) => {\n                        !isScroll && !isMove && (Date.now() - time < 200) && fn(event);\n                        isMove = false;\n                    }\n                },\n            ];\n        }\n        else {\n            return [{\n                    eventName: 'click',\n                    listener: fn\n                }];\n        }\n    }\n};\n/**\n * 添加事件别名\n * @param eventName\n * @param fn\n */\nexport function addEventAlias(eventName, fn) {\n    eventAlias[eventName] = fn;\n}\nexport function delEventAlias(eventName) {\n    delete eventAlias[eventName];\n}\nexport default eventAlias;\n","import { getType, isString } from \"./../util\";\nexport default function handleStyle(style) {\n    switch (getType(style)) {\n        case 'string': {\n            return style;\n        }\n        case 'array': {\n            return style.map(handleStyle).join(';');\n        }\n        case 'object': {\n            // 可以处理一般的css3兼容性\n            return Object.entries(style).map(([key, value]) => {\n                if (isString(value)) {\n                    const KEY = key.replace(/[A-Z]/g, $1 => '-' + $1.toLowerCase());\n                    return `${KEY}: ${value}`;\n                }\n                return '';\n            }).filter(i => i).join(';');\n        }\n        default: {\n            return '';\n        }\n    }\n}\n","import { uniqueArr } from \"../util\";\nexport default function diff(oldArr = [], newArr = [], isKeyExist = true) {\n    newArr = uniqueArr(newArr);\n    // getDelete\n    let deleteArr = [];\n    let keepArr = [];\n    let deleteAll = false; // 是否删除所有元素\n    let addAll = false;\n    let prevIndex = -2;\n    let add;\n    if (!isKeyExist) {\n        return {\n            del: {\n                arr: oldArr,\n            },\n            add: {\n                before: {\n                    key: null,\n                    arr: newArr,\n                },\n                after: {\n                    key: null,\n                    arr: [],\n                }\n            },\n            noChange: false,\n        };\n    }\n    for (let i = 0; i < oldArr.length; i++) {\n        const item = oldArr[i];\n        const INDEX = newArr.indexOf(item);\n        // console.log(INDEX, item)\n        if (INDEX < 0) {\n            deleteArr.push(item);\n        }\n        else {\n            // 判断是否在newArr中连续出现\n            if (prevIndex !== -2 && prevIndex + 1 !== INDEX) {\n                deleteAll = true;\n                addAll = true;\n                deleteArr = oldArr;\n                keepArr = [];\n                break;\n            }\n            else {\n                keepArr.push(item);\n            }\n            prevIndex = INDEX;\n        }\n    }\n    if (addAll || !keepArr.length) {\n        add = {\n            before: {\n                key: null,\n                arr: newArr,\n            },\n            after: {\n                key: 0,\n                arr: [],\n            }\n        };\n    }\n    else {\n        const start = newArr.indexOf(keepArr[0]);\n        const end = newArr.indexOf(keepArr[keepArr.length - 1]);\n        add = {\n            before: {\n                key: keepArr[0],\n                arr: newArr.slice(0, start)\n            },\n            after: {\n                key: keepArr[keepArr.length - 1],\n                arr: newArr.slice(end + 1)\n            },\n        };\n    }\n    // 计算新增数组\n    return {\n        del: {\n            arr: deleteArr,\n        },\n        add,\n        noChange: add.before.arr.length === 0 && add.after.arr.length === 0 && deleteArr.length === 0,\n    };\n}\n","import { execExpr } from \"../execExpr\";\nimport diff from \"./diff\";\nimport { unmountChildren } from \"../unmount\";\nimport { observer } from \"../autorun\";\nimport transform from \"../transform\";\nimport { DIRECTIVE_PREV } from \"../config\";\nfunction getKeyExpr(node) {\n    const child = node.children[0];\n    return child && (child.props['key']\n        || child.props[':key']\n        || child.props[`${DIRECTIVE_PREV}expr:key`]);\n}\nexport default function handleFor(value, element, ctxs, vdom, node) {\n    const [itemIndex, arrName] = value.split(' in ').map(i => i.trim());\n    const [itemName, indexName] = itemIndex.replace(/(^\\s*\\()|(\\)\\s*$)/g, '').split(',').map(i => i.trim());\n    let isExeced = false; // 是否执行过\n    let cacheKeys = [];\n    let cacheKeyVdom = {};\n    const keyValue = getKeyExpr(node);\n    vdom.exprs.push(execExpr(arrName, ctxs, (newValue, oldValue = []) => {\n        // ys:for只应该含有一个子元素\n        if (node.children.length > 1) {\n            console.error(`${DIRECTIVE_PREV}for just should have one child`);\n        }\n        // diff cache key\n        const newKeyValue = newValue.map((item, index) => {\n            let key;\n            execExpr(keyValue, [\n                ...ctxs,\n                {\n                    [itemName]: item,\n                    [indexName]: index,\n                }\n            ], newValue => {\n                key = newValue;\n            })();\n            return {\n                key,\n                item,\n            };\n        });\n        // console.log(newKeyValue)\n        const newKyes = newKeyValue.map(i => i.key);\n        const { add, del, noChange } = diff(cacheKeys, newKyes, keyValue);\n        if (noChange)\n            return;\n        cacheKeys = newKyes;\n        // 如果执行过\n        if (isExeced) {\n            // 存在key，卸载需要删除的key对应的vdom，否则整体卸载\n            if (keyValue) {\n                del.arr.forEach(key => {\n                    cacheKeyVdom[key] && unmountChildren(cacheKeyVdom[key].vdom);\n                    delete cacheKeyVdom[key]; // 删除缓存\n                });\n            }\n            else {\n                unmountChildren(vdom);\n            }\n        }\n        isExeced = true;\n        // 我们只处理 移除 + 头尾新增的情况\n        // key不发生变化的需要更新index\n        // key新增的还是需要新增\n        const childNode = element.childNodes && element.childNodes[0];\n        newKeyValue.forEach((keyItem, index) => {\n            const { key, item } = keyItem;\n            // 不存在就新增，存在就更新\n            if (!cacheKeyVdom[key]) {\n                let dd = {};\n                indexName && (dd[indexName] = index);\n                itemName && (dd[itemName] = item);\n                const observeIndexItem = observer(dd);\n                const PE = add.before.arr.includes(key) ? {\n                    appendChild: (newNode) => {\n                        childNode ? element.insertBefore(newNode, childNode) : element.appendChild(newNode);\n                        return newNode;\n                    }\n                } : element;\n                const result = transform(node, PE, [...ctxs, observeIndexItem], vdom);\n                // 如果没有key就不要加入缓存了\n                if (keyValue) {\n                    cacheKeyVdom[key] = {\n                        vdom: result,\n                        observeIndexItem,\n                    };\n                }\n            }\n            else {\n                const hh = cacheKeyVdom[key].observeIndexItem;\n                // itemName && (hh[itemName] = item)\n                indexName && (hh[indexName] = index);\n            }\n        });\n    }));\n}\n","import { execExpr } from \"../execExpr\";\nimport { unmountNode } from \"../unmount\";\nimport { addElement } from \"../transform\";\n/**\n * 处理ys:if命令\n *\n * @param {HTMLElement} parent\n * @param {any} node\n * @param {array} ctxs\n */\nexport default function handleIf(parent, node, ctxs, parentVdom) {\n    let commentHook = document.createComment('ys:if 占位');\n    parent.appendChild(commentHook);\n    let collect = [];\n    parentVdom.exprs.push(execExpr(node.props['ys:if'], ctxs, (newValue, oldValue) => {\n        if (newValue) {\n            addElement((ele, vdom) => {\n                vdom && collect.push(vdom);\n                ele && commentHook.parentElement && commentHook.parentElement.insertBefore(ele, commentHook);\n            }, node, ctxs, parentVdom);\n        }\n        else {\n            // 如果node\n            collect.forEach(i => unmountNode(i));\n            collect = [];\n        }\n    }));\n}\n","import { VirtualDOM } from \"./d\";\nimport { getType, isPromise, getComponent, getParentCtx, resortArr, isComponent, } from './util';\nimport { observer, addObserve } from './autorun';\nimport { execExpr } from \"./execExpr\";\nimport render from './render';\nimport eventAlias from \"./event/alias\";\nimport { unmountNode } from \"./unmount\";\nimport handleClass from \"./property/handleClass\";\nimport handleStyle from \"./property/handleStyle\";\nimport handleFor from \"./directive/for\";\nimport handleIf from \"./directive/if\";\nimport { DIRECTIVE_PREV, DIRECTIVE_EXPR } from \"./config\";\n// 需要优先处理的props key\nconst NEED_RESET_KEY = [':key', `${DIRECTIVE_PREV}if`, `${DIRECTIVE_PREV}show`, `${DIRECTIVE_PREV}for`];\n// key发生变化后，组件重新选案\nfunction handleKeyChange(vdom) {\n    unmountNode(vdom);\n    vdom.reRender && vdom.reRender();\n}\n// 处理innerHTML\nfunction handleDangerousHTML(vdom, ctxs = [], key = '') {\n    const { dom } = vdom;\n    if (dom instanceof HTMLElement) {\n        if (key === 'dangerousHTML') {\n            dom.innerHTML = vdom.ast.props[key];\n        }\n        else if (key === ':dangerousHTML') {\n            execExpr(vdom.ast.props[key], ctxs, (newValue, oldValue) => {\n                dom.innerHTML = newValue;\n            });\n        }\n    }\n    return false;\n}\n/**\n * 添加属性\n *\n * @param {HTMLElement} element\n * @param {any} node\n * @param {array} ctxs\n * @returns\n */\nfunction addProperties(element, vdom, ctxs) {\n    const { ast: node } = vdom;\n    const info = {\n        transformChildren: true,\n    };\n    resortArr(Object.keys(node.props), NEED_RESET_KEY).forEach(key => {\n        const value = node.props[key];\n        // 处理class\n        if (handleClass(vdom, ctxs, key))\n            return;\n        // 处理html\n        if (handleDangerousHTML(vdom, ctxs, key))\n            return;\n        const KEY = key.slice(1);\n        // 处理事件绑定\n        if (key.startsWith('@') && element instanceof HTMLElement) {\n            let aliasListeners = [];\n            vdom.exprs.push(execExpr(value, ctxs, (newValue, oldValue) => {\n                if (eventAlias[KEY]) {\n                    // 使用事件别名\n                    aliasListeners.forEach(aliasListener => {\n                        vdom.events.off(element, aliasListener.eventName, aliasListener.listener);\n                    });\n                    aliasListeners = eventAlias[KEY](newValue);\n                    aliasListeners.forEach(aliasListener => {\n                        vdom.events.on(element, aliasListener.eventName, aliasListener.listener);\n                    });\n                }\n                else {\n                    vdom.events.off(element, KEY, oldValue);\n                    vdom.events.on(element, KEY, newValue);\n                }\n            }));\n        }\n        else if (key.startsWith(':')) {\n            vdom.exprs.push(execExpr(value, ctxs, (newValue, oldValue, execTime) => {\n                if (['checked', 'value'].includes(KEY)) {\n                    element[KEY] = newValue;\n                }\n                else if (KEY === 'style') {\n                    newValue = handleStyle(newValue);\n                }\n                else if (KEY === 'key' && oldValue !== newValue && execTime > 1) {\n                    // 如果key发生变化，会卸载原有vdom，重新渲染\n                    handleKeyChange(vdom);\n                    return;\n                }\n                element.setAttribute(KEY, newValue);\n            }));\n        }\n        else if (key.startsWith(DIRECTIVE_PREV)) {\n            const directive = key.slice(DIRECTIVE_PREV.length);\n            // 显示\n            if (directive === 'show') {\n                vdom.exprs.push(execExpr(value, ctxs, (newValue, oldValue) => {\n                    element.style.cssText += `;display: ${newValue ? 'block' : 'none'};`;\n                }));\n            }\n            else if (directive === 'for') {\n                info.transformChildren = false;\n                handleFor(value, element, ctxs, vdom, node);\n            }\n            else if (directive === 'bgd') {\n                vdom.exprs.push(execExpr(value, ctxs, (newValue, oldValue) => {\n                    element.style.cssText += `;background: url(${newValue});`;\n                }));\n            }\n            else if (directive === 'html') {\n                info.transformChildren = false;\n                vdom.exprs.push(execExpr(value, ctxs, (newValue, oldValue) => {\n                    element.innerHTML = newValue;\n                }));\n            }\n            else if (directive.startsWith(DIRECTIVE_EXPR)) {\n                const KEY = directive.slice(DIRECTIVE_EXPR.length);\n                execExpr(value, ctxs, (newValue, oldValue) => {\n                    element.setAttribute(KEY, newValue);\n                })();\n            }\n        }\n        else if (key === 'ref') {\n            switch (getType(value)) {\n                case 'string': {\n                    ctxs[0].refs[value] = element;\n                    break;\n                }\n                case 'function': {\n                    value(vdom.dom);\n                    break;\n                }\n            }\n        }\n        else {\n            element.setAttribute(key, node.props[key]);\n        }\n    });\n    return info;\n}\n/**\n * 获取自定义组件属性\n */\nfunction getProps(vdom, ctxs) {\n    const { ast: node } = vdom;\n    let newProps = {};\n    resortArr(Object.keys(node.props), NEED_RESET_KEY).forEach(key => {\n        const value = node.props[key];\n        if (/^@|:|ys:expr:/.test(key)) {\n            const KEY = key.replace(/^@|:|ys:expr:/, '');\n            vdom.exprs.push(execExpr(value, ctxs, (newValue, oldValue, execTime) => {\n                // 如果key为props，则对props进行rest操作，方便子组件对数据的获取\n                if (KEY === 'props') {\n                    Object.entries(newValue).forEach(([k, v]) => {\n                        addObserve(newProps, k, v);\n                    });\n                }\n                else {\n                    newProps[KEY] = newValue;\n                }\n                if (KEY === 'key' && oldValue !== newValue && execTime > 1) {\n                    // 如果key发生变化，会卸载原有vdom，重新渲染\n                    handleKeyChange(vdom);\n                }\n            }));\n        }\n        else {\n            newProps[key] = value;\n        }\n    });\n    // 元素传递\n    newProps['children'] = {\n        node,\n        ctxs,\n    };\n    newProps = observer(newProps);\n    return newProps;\n}\n/**\n * 添加元素\n */\nexport function addElement(appendFn, ast, ctxs, parentVdom) {\n    const vdom = new VirtualDOM(parentVdom);\n    vdom.ast = ast;\n    vdom.ctxs = ctxs;\n    // 方便dom卸载后，重新渲染\n    vdom.reRender = () => {\n        addElement(appendFn, ast, ctxs, parentVdom);\n    };\n    if (/^[A-Z]/.test(ast.tagName)) {\n        // 处理子组件\n        const Com = getComponent(ast.tagName, ctxs);\n        // 判断是否是Component的子类\n        if (isComponent(Com, ast)) {\n            appendFn(undefined, vdom);\n            function renderComponent(Com) {\n                // 因为有可能是异步获取组件，因此这里对vdom进行判断，vdom是否已经被卸载\n                if (vdom.unmounted) {\n                    console.log('vdom已被卸载，不执行渲染');\n                    return;\n                }\n                // 通过创建一个Comment占位节点，可实无root渲染\n                const com = render(Com, getProps(vdom, ctxs), {\n                    appendChild: appendFn,\n                }, vdom);\n                com.parent = getParentCtx(ctxs);\n                com.parent.children.push(com);\n                vdom.component = com;\n                // 添加ref\n                if (ast.props.ref) {\n                    ctxs[0].refs[ast.props.ref] = com;\n                }\n            }\n            // 如果是Promise，可执行懒加载\n            if (isPromise(Com)) {\n                Com.then(Com => {\n                    renderComponent(Com);\n                });\n            }\n            else {\n                renderComponent(Com);\n            }\n        }\n    }\n    else if (ast.tagName === 'slot') {\n        // 处理slot，获取children后，并不监听变化\n        execExpr('props.children', ctxs, (newValue) => {\n            transform(newValue.node, {\n                appendChild: appendFn,\n            }, [getProps(vdom, ctxs), ...newValue.ctxs], parentVdom);\n        })();\n    }\n    else if (ast.tagName === 'template') {\n        appendFn(null, vdom); // 添加vdom\n        transform(ast, {\n            appendChild: appendFn,\n        }, ctxs, vdom);\n    }\n    else {\n        let createE = vdom.ast.isSVG\n            ? document.createElementNS('http://www.w3.org/2000/svg', ast.tagName) // 添加svg支持\n            : document.createElement(ast.tagName);\n        vdom.dom = createE;\n        appendFn(createE, vdom);\n        const result = addProperties(createE, vdom, ctxs);\n        vdom.oncreate();\n        result.transformChildren && ast.children && ast.children.length && transform(ast, createE, ctxs, vdom);\n    }\n    return vdom;\n}\n/**\n * ast transform to node\n *\n * @param {any} ast\n * @param {HTMLElement} element\n * @param {anray} ctxs\n */\nfunction transform(ast, element, ctxs, parentVdom = new VirtualDOM()) {\n    const vdoms = ast.children.map(node => {\n        if (node.type === 'element' || node.type === 'component') {\n            // 处理ys:if指令\n            if (node.props[`${DIRECTIVE_PREV}if`]) {\n                handleIf(element, node, ctxs, parentVdom);\n            }\n            else {\n                return addElement((createE) => {\n                    createE && element.appendChild(createE);\n                }, node, ctxs, parentVdom);\n            }\n        }\n        else {\n            const vdom = new VirtualDOM(parentVdom);\n            vdom.ast = ast;\n            vdom.ctxs = ctxs;\n            let createE;\n            if (node.type === 'expr') {\n                createE = document.createTextNode('');\n                element.appendChild(createE);\n                vdom.exprs.push(execExpr(node.value, ctxs, (newValue) => {\n                    createE.textContent = newValue;\n                }));\n            }\n            else {\n                createE = document.createTextNode(node.value);\n                element.appendChild(createE);\n            }\n            vdom.dom = createE;\n            parentVdom.children.push(vdom);\n            return vdom;\n        }\n    }).filter(i => i);\n    return {\n        children: vdoms\n    };\n}\nexport default transform;\n","import Component from './Component';\nimport toAST from './parser/parseTemplate';\nimport transform from './transform';\nimport { observer, addObserve, autorun } from './autorun';\nimport { merge, isFunction, isString } from \"./util\";\nimport { COMPONENT_DOM_HOOK } from './config';\n/**\n * @param {any} Com\n * @param {*} props\n * @param {HTMLElement} dom\n * @returns {Component}\n */\nexport default function render(Com, props, dom, vdom) {\n    // 卸载原有dom上挂载的component\n    if (dom instanceof HTMLElement\n        && dom[COMPONENT_DOM_HOOK]\n        && dom[COMPONENT_DOM_HOOK].vdom\n        && !dom[COMPONENT_DOM_HOOK].vdom.unmounted) {\n        dom[COMPONENT_DOM_HOOK].__willUnmount();\n    }\n    // string/function -> Component\n    if (isFunction(Com)) {\n        // 如果函数没有继承Component，就把它当做render方法\n        if (!(Com.prototype instanceof Component)) {\n            const renderFn = Com;\n            Com = class extends Component {\n                render() {\n                    return renderFn();\n                }\n            };\n        }\n    }\n    else if (isString(Com)) {\n        const template = Com;\n        Com = class extends Component {\n            constructor() {\n                super(...arguments);\n                this.template = template;\n            }\n        };\n    }\n    else {\n        console.error(`render first param should be a function`);\n    }\n    const ctx = new Com();\n    // 把组件实例挂载在dom上\n    dom instanceof HTMLElement && (dom[COMPONENT_DOM_HOOK] = ctx);\n    // state 与 props 属性不可被更改\n    Object.defineProperty(ctx, 'state', {\n        writable: false,\n        enumerable: true,\n        value: observer(ctx.state, { deep: true }),\n    });\n    Object.defineProperty(ctx, 'props', {\n        writable: false,\n        enumerable: true,\n        value: observer(merge(props, Com.defaultProps || {})),\n    });\n    // 处理computed的key，将其observer化，并挂载在组件实例上\n    // 处理需要有个autorun包裹，然后\n    // 需要obersev\n    Object.keys(ctx.computed).forEach(key => {\n        addObserve(ctx, key, ctx.computed[key].call(ctx));\n        // 待收集依赖\n        ctx.vdom.exprs.push(autorun(() => {\n            return ctx.computed[key].call(ctx);\n        }, {\n            callback: newValue => {\n                ctx[key] = newValue;\n                return;\n            }\n        }));\n    });\n    // 即将渲染\n    ctx.willMount();\n    // 渲染进行中\n    const ast = toAST(ctx.render());\n    ast.ctx = ctx;\n    transform(ast, dom, [ctx, ctx.state, ctx.props], ctx.vdom);\n    // 渲染完毕\n    ctx.didMount();\n    return ctx;\n}\n","import Component from \"./../Component\";\nimport render from \"./../render\";\nimport register from \"./../register\";\nclass Link extends Component {\n    constructor() {\n        super(...arguments);\n        this.click = (e) => {\n            const { click, replace = false, redirect = false, href = '' } = this.props;\n            e.preventDefault();\n            click && click(e);\n            if (redirect) {\n                replace ? location.replace(href) : location.href = href;\n            }\n            else if (replace) {\n                Router.replace(href);\n            }\n            else {\n                Router.push(href);\n            }\n        };\n    }\n    render() {\n        return (`\n            <a :data-href={props.href} @click={click} :class={props.class} :style={props.style}>\n                <slot />\n            </a>\n        `);\n    }\n}\nLink.defaultProps = {\n    href: '',\n    style: '',\n    class: '',\n};\n// 路由匹配\nfunction match(url = '', obj = {}) {\n    const urlItems = url.trim().split('/');\n    let params = {};\n    let router = '';\n    const matched = Object.keys(obj).some((route) => {\n        const routeItems = route.trim().split('/');\n        router = '';\n        // 全局匹配的级别最低，一般用来处理404\n        if (route === '*')\n            return false;\n        // 长度相等，或者路由以*为结尾并且routeItems不能比urlItems长\n        if (routeItems.length === urlItems.length\n            || (routeItems[routeItems.length - 1] === '*' && routeItems.length <= urlItems.length)) {\n            params = {}; // 获取参数\n            router = route; // 匹配到的路由地址\n            return routeItems.every((i, index) => {\n                const urlItemsItem = urlItems[index];\n                // 参数匹配\n                if (i.startsWith(':')) {\n                    // 对 /:id的支持\n                    const [key, reg] = i.slice(1).split('@');\n                    params[key] = urlItemsItem;\n                    // 对正则表达式的支持 /:name@aa.+\n                    if (reg) {\n                        return new RegExp(`^${reg}$`).test(urlItemsItem);\n                    }\n                    return true;\n                }\n                // * 匹配所有\n                if (i === '*') {\n                    return true;\n                }\n                // 常规性匹配 Abc*\n                if (i.includes('*')) {\n                    const reg = i.replace('*', '.*');\n                    return new RegExp(`^${reg}$`).test(urlItemsItem);\n                }\n                // 纯文匹配\n                return i === urlItemsItem;\n            });\n        }\n        return false;\n    });\n    if (matched) {\n        return {\n            params,\n            url,\n            router,\n            value: obj[router],\n        };\n    }\n    else if (obj['*']) {\n        // 观察是否配置了全局匹配\n        // 其实此时应该跳转404\n        return {\n            params,\n            url,\n            router: '*',\n            value: obj['*'],\n        };\n    }\n    return null;\n}\nlet Router = {\n    hash: false,\n    routes: {},\n    $root: document.body,\n    push(url) {\n        window.history.pushState({}, '', this.getFullPath(url));\n        this.handleUrlChange(url);\n    },\n    replace(url) {\n        window.history.replaceState({}, '', this.getFullPath(url));\n        this.handleUrlChange(url);\n    },\n    handleUrlChange(url) {\n        const a = document.createElement('a');\n        a.href = url;\n        const path = a.pathname;\n        const result = match(path, this.routes);\n        if (result) {\n            const { router, params, value } = result;\n            const { component, props = {} } = value;\n            render(component, Object.assign({}, props, { params }), this.$root);\n        }\n    },\n    getFullPath(url) {\n        return this.hash ? `${location.pathname}${location.search}#${url}` : url;\n    },\n    getPathname() {\n        return (this.hash ? location.hash.slice(1) : location.pathname) || '/';\n    }\n};\nexport default function router(config) {\n    register('Link', Link);\n    Router = Object.assign({}, Router, config);\n    window.addEventListener('popstate', () => {\n        Router.handleUrlChange(Router.getPathname());\n    });\n    Router.handleUrlChange(Router.getPathname());\n}\n","import { HANDLE_CLASS_FN_NME } from \"../config\";\nexport default function cssModule(styles) {\n    return function (target) {\n        target.prototype[HANDLE_CLASS_FN_NME] = function (classNames = '') {\n            return classNames.trim().split(/\\s+/g).map(key => {\n                // 如果不存在key的映射，就返回key， 这样子即使用了module class也兼容了global class\n                return styles[key] || key;\n            }).join(' ');\n        };\n    };\n}\n","import Component from './Component';\nimport render from './render';\nimport { autorun, observer, isObserve, addObserve, observerDeep } from './autorun';\nimport register, { registerComponents } from \"./register\";\nimport { addEventAlias } from \"./event/alias\";\nimport { addPipe } from \"./execExpr\";\nimport forceUpdate from \"./forceUpdate\";\nimport router from './plugins/router';\nimport cssModule from './plugins/cssModule';\nexport default {\n    observer,\n    isObserve,\n    addObserve,\n    observerDeep,\n    autorun,\n    Component,\n    render,\n    register,\n    registerComponents,\n    addEventAlias,\n    addPipe,\n    forceUpdate,\n    // plugins\n    router,\n    cssModule,\n};\nexport { observer, isObserve, addObserve, observerDeep, autorun, Component, render, register, registerComponents, addEventAlias, addPipe, forceUpdate, \n// plugins\nrouter, cssModule, };\n"],"names":["registerComponents","register","name","Com","getType","arg","Object","prototype","toString","call","match","toLowerCase","isFunction","args","every","isArray","isString","isPromise","toClassNames","v","map","join","keys","key","uniqueArr","arr","newArr","forEach","includes","item","push","merge","anys","base","slice","any","undefined","bindContext","fn","ctx","bind","uuid","len","S","LEN","length","repeat","split","Math","round","random","getComponent","ctxs","i","components","getParentCtx","Component","resortArr","isComponent","component","ast","error","tagName","eventCache","gloablEventCache","$root","document","documentElement","on","element","event","target","cache","stopPropagation","isStop","Node","contains","addEventListener","unshift","off","_key","filter","_ele","_fn","removeEventListener","BubbleEventList","YSEvents","queue","timeout","isUpdating","addUpdateQueue","list","setTimeout","forceUpdate","afterFn","haveExec","DIRECTIVE_PREV","DIRECTIVE_EXPR","COMPONENT_DOM_HOOK","OBSERVE_ID","HANDLE_CLASS_FN_NME","Observe","defaultCurrent","currentFn","resetCurrentFn","Depends","root","ObserveId","id","addObserverId","newObj","defineProperty","addObserve","defaultValue","options","deep","value","depends","isResetValue","collect","observer","assign","parentDepend","newValue","run","observeArr","isObserve","concat","result","observeObj","obj","observerDeep","autorun","destoryDepends","destory","splice","wrapFn","getDestory","depend","callback","parseExpr","body","params","replace","test","trim","Function","parseFilterCache","parseFilter","str","exprArr","current","index","char","matchStr","pipes","addPipe","handlePipe","fns","getPipes","exprs","execExprIm","expr","window","getValue","hasOwnProperty","inputExpr","pipeExprs","parseResult","input","execExpr","oldValue","newValueCache","execTime","isEqual","equal","execExprOnce","returnValue","handleClassNames","updateClassName","classNames","classes","classStr","HTMLElement","className","SVGElement","setAttribute","getClassProperties","type","testClass","vdom","dom","classProperties","props","some","handleClass","node","handleEnter","handleLeave","leaveTime","Promise","res","Number","VirtualDOM","parent","events","children","unmounted","fnExpr","resultResult","fnResult","pList","r","all","then","parentElement","removeChild","__willUnmount","TokenElement","origin","isExpr","ASTNode","isSVG","unmountNode","removeDOM","unmount","onunmount","unmountChildren","child","template","state","refs","computed","$emit","data","stopBubble","$emitChildren","$emitSiblings","com","willUnmount","defaultProps","getMatched","start","end","START_LEN","END_LEN","startsWith","pop","selfCloseElements","M","SELF_CLOSE","CLOSE_START","TAG_CLOSE","OPEN_START","EQ","TAG_NAME","PROPERTY_NAME","PROPERTY_VALUE","EXPR","STRING","getToken","token","localStr","removePreSpace","space","getPrev","next","handleASTError","message","enter","row","column","max","lastIndexOf","insertStr","P","startArr","endArr","toAST","currentNode","currentT","getT","localIndex","propertyKey","propertyValue","TAG_TYPE","closeTagName","errMsg","last","handleSVG","isScroll","eventAlias","keyCode","recodeKey","ctrl","navigator","userAgent","time","isMove","Date","now","addEventAlias","eventName","handleStyle","style","entries","KEY","$1","diff","oldArr","isKeyExist","deleteArr","keepArr","addAll","prevIndex","add","INDEX","indexOf","before","after","getKeyExpr","handleFor","itemIndex","arrName","itemName","indexName","isExeced","cacheKeys","cacheKeyVdom","keyValue","newKeyValue","newKyes","del","noChange","childNode","childNodes","keyItem","dd","observeIndexItem","PE","newNode","insertBefore","appendChild","transform","hh","handleIf","parentVdom","commentHook","createComment","ele","NEED_RESET_KEY","handleKeyChange","reRender","handleDangerousHTML","innerHTML","addProperties","info","aliasListeners","aliasListener","listener","directive","cssText","transformChildren","getProps","newProps","k","addElement","appendFn","renderComponent","log","render","ref","createE","createElementNS","createElement","oncreate","vdoms","createTextNode","textContent","renderFn","arguments","willMount","didMount","Link","click","e","redirect","href","preventDefault","location","url","urlItems","router","matched","route","routeItems","urlItemsItem","reg","RegExp","Router","history","pushState","getFullPath","handleUrlChange","replaceState","a","path","pathname","routes","hash","search","config","getPathname","cssModule","styles"],"mappings":"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"}